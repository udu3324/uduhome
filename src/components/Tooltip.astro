---
const { text, paste } = Astro.props

// ty <3 https://blog.rampatra.com/how-to-create-a-tooltip-with-just-tailwind-css-no-libraries
---

<script define:vars={{ text, paste }}>
    // tysm https://stackoverflow.com/a/78528383/16216937
    function handleClick() {
        //console.log("pasting " + paste)
        document.getElementById(`text${paste}`).textContent = "copied!"

        const clipboardItem = new ClipboardItem({"text/plain": paste});
        navigator.clipboard.write([clipboardItem])

        setTimeout(() => {
            document.getElementById(`text${paste}`).textContent = text
        }, 500);
    }

    document.addEventListener("DOMContentLoaded", () => {
        document.getElementById(`handle${paste}`).addEventListener("click", handleClick)
    })
    
</script>

<div class="relative group text-right">
  <button id={`handle${paste}`}>
    <slot />
  </button>
  
  <!-- Tooltip container -->
  <div id="tooltip" class="absolute bottom-full right-0 hidden group-hover:block pointer-events-none">
    <span id={`text${paste}`}>{text}</span>

    <div class="absolute bottom-full right-0 top-full h-0 w-0 border-l-4 border-r-4 border-t-4 border-l-transparent border-r-transparent border-t-black"></div>
  </div>
</div>

<style>
    @reference "tailwindcss";

    #tooltip {
        @apply w-max font-mono px-2 py-1 mb-2 bg-black rounded-tl-lg rounded-tr-lg rounded-bl-lg;
        color: var(--accent-lighter);
    }
</style>